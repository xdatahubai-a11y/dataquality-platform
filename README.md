# DataQuality Platform

Enterprise data quality platform with configurable rule engine, Spark-based profiling, and Azure-native deployment.

![Python](https://img.shields.io/badge/python-3.11-blue)
![FastAPI](https://img.shields.io/badge/FastAPI-0.104-green)
![React](https://img.shields.io/badge/React-18-blue)
![Tests](https://img.shields.io/badge/tests-43%20passed-brightgreen)

## Features

- **6 DQ Dimensions**: Completeness, Uniqueness, Accuracy, Consistency, Timeliness, Validity
- **Rule Engine**: YAML-based declarative rules with configurable thresholds and operators
- **Data Sources**:
  - **Azure**: ADLS Gen2, Delta Tables, SQL Server
  - **AWS**: S3, Redshift, Glue Data Catalog
  - **Databases**: PostgreSQL, MySQL
- **Spark Jobs**: PySpark-based large-scale DQ profiling
- **REST API**: Full CRUD for rules, sources, jobs, and metrics (auto-generated OpenAPI docs)
- **Dashboard**: React/TypeScript UI with score cards, dimension charts, and run history
- **Cloud Deployment**: Azure (Container Apps, Bicep) and AWS (ECS Fargate, CloudFormation)

## Quick Start

### API Server
```bash
pip install -r requirements.txt
uvicorn api.main:app --reload --port 8000
# API docs at http://localhost:8000/docs
```

### Dashboard
```bash
cd dashboard
npm install
npm run dev
```

### Docker Compose (Full Stack)
```bash
cd infra
docker-compose up --build
# API: http://localhost:8000
# Dashboard: http://localhost:3000
```

## Project Structure

```
api/          — FastAPI backend (routers, models, schemas)
engine/       — DQ rule engine + dimension calculators
connectors/   — Data source connectors (ADLS Gen2, Delta, SQL Server, PostgreSQL, MySQL, S3, Redshift, Glue)
spark/        — Spark job definitions and submission
dashboard/    — React/TypeScript frontend
infra/        — Docker, Nginx, Azure Bicep deployment
tests/        — Pytest test suite (43 tests)
rules/        — Example YAML rule definitions
docs/         — Architecture and design documentation
```

## Example Rule (YAML)

```yaml
checks:
  - name: email_completeness
    dimension: completeness
    column: email
    operator: gte
    threshold: 95.0
    severity: critical
    config:
      treat_empty_as_null: true

  - name: customer_id_uniqueness
    dimension: uniqueness
    column: customer_id
    threshold: 100.0
```

## API Endpoints

| Method | Path | Description |
|--------|------|-------------|
| GET | `/api/health` | Health check |
| POST/GET/PUT/DELETE | `/api/rules` | Rule CRUD |
| POST/GET/PUT/DELETE | `/api/sources` | Data source CRUD |
| POST/GET | `/api/jobs` | Job submission & monitoring |
| GET | `/api/metrics/summary` | Overall DQ scores |
| GET | `/api/metrics/dimensions` | Per-dimension scores |

## Quick Start (Local with Docker)

```bash
make setup          # Docker + generate data + seed DB + run checks
# Or step by step:
make test-data      # Generate test CSV/Parquet files
make seed           # Seed DB with sources + rules
make run-checks     # Run DQ validation suite
make local          # All of the above without Docker
```

## Deploy to AWS

```bash
cd infra/terraform/aws
cp terraform.tfvars.example terraform.tfvars  # edit with your values
terraform init && terraform apply
```

## Deploy to Azure

```bash
cd infra/terraform/azure
cp terraform.tfvars.example terraform.tfvars  # edit with your values
terraform init && terraform apply
```

See [infra/terraform/README.md](infra/terraform/README.md) for full details.

## Test Data

Generated by `scripts/generate_test_data.py`:

| Dataset | Rows | Expected Result |
|---------|------|-----------------|
| customers.csv | 10,000 | Mixed — completeness/uniqueness fail, validity/accuracy pass |
| orders.csv | 50,000 | Clean — all dimensions pass |
| products.csv | 1,000 | Perfect — positive control |
| corrupted.csv | 500 | Degraded — everything fails |

Run `make run-checks` to see the full results matrix.

## Running Tests

```bash
python -m pytest tests/ -v   # or: make test
```

## Documentation

- [Research Report](docs/01-research.md)
- [Requirements](docs/02-requirements.md)
- [Architecture](docs/03-architecture.md)
- [Implementation](docs/04-implementation.md)
- [Test Report](docs/05-test-report.md)
- [Project Overview](docs/06-project-overview.md)

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md) for development setup and guidelines.

## License

MIT
